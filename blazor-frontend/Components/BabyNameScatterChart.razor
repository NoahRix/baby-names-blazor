@inject HttpClient Http

<MudPaper Class="pa-4" Style="width: 90%;">
    <MudCard Elevation="3">
        <MudCardContent>
            <MudText Typo="Typo.h6" Class="mb-4">Top 100 Baby Names</MudText>
            @if (data.Any())
            {
                <MudTable Items="@data" Dense="true" Hover="true" Striped="true" FixedHeader="true" Height="400px">
                    <HeaderContent>
                        <MudTh>Index</MudTh>
                        <MudTh>Name</MudTh>
                        <MudTh>Count</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd DataLabel="Index">@(data.IndexOf(context) + 1)</MudTd>
                        <MudTd DataLabel="Name">@context.FirstName</MudTd>
                        <MudTd DataLabel="Count">@context.NameCount.ToString("N0")</MudTd>
                    </RowTemplate>
                </MudTable>
            }
        </MudCardContent>
    </MudCard>
</MudPaper>

@code {
    private List<BabyNameData> data = new();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var result = await Http.GetFromJsonAsync<List<BabyNameData>>("/api/BabyNames/first-thousand");
            if (result != null)
            {
                data = result.Take(100).ToList();
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching scatter data: {ex.Message}");
        }
    }

    public class BabyNameData
    {
        public string FirstName { get; set; } = string.Empty;
        public int NameCount { get; set; }
    }
}
